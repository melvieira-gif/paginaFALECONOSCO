<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HEALTH-IA</title>
    <link rel="stylesheet" href="style.css" />
</head>

<!--Parte para se cadastrar-->
<body>

    <!--Principais botões-->
    <div class="fundo_btn">
        <button class="btn branco" id="btn_contato">Fale Conosco</button>
    </div>
    <!--Parte fale conosco-->
    <div class="div_contato ocultar" id="div_contato">
        <h1>Fale conosco</h1>
        <!--preenchimento fale conosco-->
        <div id="div_formulario" class="div_formulario">
            <!--Parte nome-->
            <label for="input_nome">Nome:</label>
            <input id="input_nome" class="input_formulario" type="text" placeholder="Digite seu nome completo">
            <br><br>
            <!--Parte email-->
            <label for="input_email">Email:</label>
            <input id="input_email" class="input_formulario" type="email" placeholder="Insira seu email">
            <br><br>
            <!--Parte assunto-->
            <label for="input_assunto">Assunto:</label>
            <input id="input_assunto" class="input_formulario" type="text" placeholder="Digite qual assunto seria">
            <br><br>
            <!--Parte mensagem-->
            <label for="input_msg">Mensagem:</label>
            <input id="input_msg" class="input_formulario" type="text" placeholder="Digite qual mensagem seria">
            <br><br>
            <button class="botao" id="btn_cadastro">Enviar</button>
            <br>
            <p class="d_p" id="resultado">O resultado vai aparecer aqui</p>
        </div>
    </div>
</body>

<script>
    // para os botões sumirem/desaparecer login e fale conosco
    document.getElementById("btn_contato").addEventListener("click", () => {
        document.getElementById("div_contato").classList.toggle("ocultar");
    }); 
    // back+banco de dados
    // criar um evento para quando clicar no botão
    document.getElementById("btn_cadastro").addEventListener("click", async ()=>{
        // primeira etapa- pegar as informaçoes dos inputs 
        const nome = document.getElementById("input_nome").value
        const email = document.getElementById("input_email").value
        const assunto = document.getElementById("input_assunto").value
        const mensagem = document.getElementById("input_msg").value

        // segunda etapa- fazer a requisição para o back-end o que o thunder client não mostra oq faz
        // fetch funciona pq vai passar o endereço da requisição
        const resposta = await fetch (`http://localhost:3000/faleconosco`,{
            method:"POST",
            headers:{
                "Accept":"application/json",
                "Content-Type":"application/json" // o tipo de conteudo que estou mandando é o JSON
            },
            body:JSON.stringify({
                "nome":nome,
                "email":email,
                "assunto":assunto,
                "mensagem":mensagem})
        })
        // terceira etapa - pegar a resposta do back-end
        if(resposta.ok){
            const dados = await resposta.json()
            document.getElementById("resultado").innerText = dados.resposta
        }else{

        }
    })
</script>
</html>